<html>

    <head>
        <style>

            body {
                background-color: #000;
            }

            #canvas {
                background-color: #F6E8EA;
                border: 1px solid black;
                margin: 0 auto;
                display: block;
                margin: auto;
            }

        </style>

    </head>



    <body onload="init()">
        
        <canvas id="canvas" width="600" height = "600"></canvas>


        <script type="text/javascript">

            
            var canvas = document.getElementById('canvas');
            var oL = canvas.offsetLeft;
            var oR = canvas.offsetRight;
            var oT = canvas.offsetTop;
            var ctx = canvas.getContext('2d');

            var startButton = {
                timer : {
                    started : false,
                    completed : false,
                    startTime : {},
                    endTime : {}
                },
                x : 225,
                y : 25,
                width : 150,
                height : 35,
                color : '#576490',
                borderColor : '#493548',
                textColor : '#ffffff',
                text : 'START'
            };

            function init () {
                ctx.font = "lighter 18px Verdana";
                window.requestAnimationFrame(draw);
            }

            // click position detection function for rectangular areas
            function clickedInside (element, x, y) {
                if ( x >= element.x && x <= element.x + element.width && y >= element.y && y <= element.y + element.height ) {
                    return true;
                }
                else {
                    return false;
                }
            }

            function draw () {
                ctx.fillStyle = "#F6E8EA";
                ctx.fillRect(0, 0, 600, 600);

                // Start Button
                ctx.fillStyle = startButton.color;
                ctx.strokeStyle = startButton.borderColor;
                ctx.lineWidth = 8;
                ctx.strokeRect( startButton.x, startButton.y, startButton.width, startButton.height );
                ctx.fillRect( startButton.x, startButton.y, startButton.width, startButton.height );

                ctx.textAlign = 'center';
                ctx.fillStyle = startButton.textColor;
                ctx.fillText( startButton.text, startButton.x + startButton.width/2, startButton.y + startButton.height/2 + 5 );


                window.requestAnimationFrame(draw);
            }

            canvas.addEventListener('click', function(e) {

                var x = e.pageX - canvas.offsetLeft;
                var y = e.pageY - canvas.offsetTop;
                //console.log("mouse: " + x + " " + y);

                if ( clickedInside(startButton, x, y) ) {
                    time = performance.now();
                    //console.log("clicked start button at " + time);
                    if ( !startButton.completed ) {
                        if ( !startButton.started ) {
                            console.log("starting timer!");
                            startButton.borderColor = '#80B192';
                            startButton.started = true;
                            startButton.startTime = time;
                        } else {
                            console.log("ending timer, total duration " + (time / 1000).toFixed(2) + "s");
                            startButton.borderColor = '#493548';
                            startButton.completed = true;
                            startButton.endTime = time;
                        }
                    }
                    
                };
                
            });

        </script>

    </body>



</html>